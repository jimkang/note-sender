!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=t((function(e,t){var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var a=e;return Array.isArray(e)&&!Array.isArray(r)&&(a=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach((function(r,a){n.call(e,a)?e[a]&&"object"==typeof e[a]?e[a]=t.merge(e[a],r,o):e.push(r):e[a]=r})),e):Object.keys(r).reduce((function(e,a){var i=r[a];return n.call(e,a)?e[a]=t.merge(e[a],i,o):e[a]=i,e}),a)},t.assign=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var a=t.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?n+=t.charAt(o):a<128?n+=r[a]:a<2048?n+=r[192|a>>6]+r[128|63&a]:a<55296||a>=57344?n+=r[224|a>>12]+r[128|a>>6&63]+r[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(o)),n+=r[240|a>>18]+r[128|a>>12&63]+r[128|a>>6&63]+r[128|63&a])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],i=Object.keys(a),c=0;c<i.length;++c){var u=i[c],s=a[u];"object"==typeof s&&null!==s&&-1===n.indexOf(s)&&(t.push({obj:a,prop:u}),n.push(s))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}})),r=String.prototype.replace,o=/%20/g,a={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return c.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,o,a,i,c,s,l,f,d,p,h){var v=t;if("function"==typeof s)v=s(r,v);else if(v instanceof Date)v=d(v);else if(null===v){if(a)return c&&!h?c(r,u.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||n.isBuffer(v))return c?[p(h?r:c(r,u.encoder))+"="+p(c(v,u.encoder))]:[p(r)+"="+p(String(v))];var y,m=[];if(void 0===v)return m;if(Array.isArray(s))y=s;else{var g=Object.keys(v);y=l?g.sort(l):g}for(var b=0;b<y.length;++b){var w=y[b];i&&null===v[w]||(m=Array.isArray(v)?m.concat(e(v[w],o(r,w),o,a,i,c,s,l,f,d,p,h)):m.concat(e(v[w],r+(f?"."+w:"["+w+"]"),o,a,i,c,s,l,f,d,p,h)))}return m},l=Object.prototype.hasOwnProperty,f={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},d=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),i=a?r.slice(0,a.index):r,c=[];if(i){if(!n.plainObjects&&l.call(Object.prototype,i)&&!n.allowPrototypes)return;c.push(i)}for(var u=0;null!==(a=o.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&l.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var a,i=e[o];if("[]"===i)a=(a=[]).concat(r);else{a=n.plainObjects?Object.create(null):{};var c="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,u=parseInt(c,10);!isNaN(u)&&i!==c&&String(u)===c&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(a=[])[u]=r:a[c]=r}r=a}return r}(c,t,n)}},p=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:f.delimiter,r.depth="number"==typeof r.depth?r.depth:f.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:f.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:f.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:f.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:f.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:f.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:f.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:f.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,o),i=0;i<a.length;++i){var c,u,s=a[i],d=s.indexOf("]="),p=-1===d?s.indexOf("="):d+1;-1===p?(c=t.decoder(s,f.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(s.slice(0,p),f.decoder),u=t.decoder(s.slice(p+1),f.decoder)),l.call(n,c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}return n}(e,r):e,a=r.plainObjects?Object.create(null):{},i=Object.keys(o),c=0;c<i.length;++c){var u=i[c],s=d(u,o[u],r);a=n.merge(a,s,r)}return n.compact(a)},h=function(e,t){var r=e,o=t?n.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===o.delimiter?u.delimiter:o.delimiter,l="boolean"==typeof o.strictNullHandling?o.strictNullHandling:u.strictNullHandling,f="boolean"==typeof o.skipNulls?o.skipNulls:u.skipNulls,d="boolean"==typeof o.encode?o.encode:u.encode,p="function"==typeof o.encoder?o.encoder:u.encoder,h="function"==typeof o.sort?o.sort:null,v=void 0!==o.allowDots&&o.allowDots,y="function"==typeof o.serializeDate?o.serializeDate:u.serializeDate,m="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:u.encodeValuesOnly;if(void 0===o.format)o.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,o.format))throw new TypeError("Unknown format option provided.");var g,b,w=a.formatters[o.format];"function"==typeof o.filter?r=(b=o.filter)("",r):Array.isArray(o.filter)&&(g=b=o.filter);var j,_=[];if("object"!=typeof r||null===r)return"";j=o.arrayFormat in i?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var O=i[j];g||(g=Object.keys(r)),h&&g.sort(h);for(var A=0;A<g.length;++A){var x=g[A];f&&null===r[x]||(_=_.concat(s(r[x],x,O,l,f,d?p:null,b,h,v,y,w,m)))}var S=_.join(c),k=!0===o.addQueryPrefix?"?":"";return S.length>0?k+S:""},v=t((function(t,n){var r="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",i="[object Boolean]",c="[object Date]",u="[object Function]",s="[object GeneratorFunction]",l="[object Map]",f="[object Number]",d="[object Object]",p="[object Promise]",h="[object RegExp]",v="[object Set]",y="[object String]",m="[object Symbol]",g="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",j="[object Float32Array]",_="[object Float64Array]",O="[object Int8Array]",A="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",L="[object Uint16Array]",R="[object Uint32Array]",C=/\w*$/,T=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,E={};E[a]=E["[object Array]"]=E[b]=E[w]=E[i]=E[c]=E[j]=E[_]=E[O]=E[A]=E[x]=E[l]=E[f]=E[d]=E[h]=E[v]=E[y]=E[m]=E[S]=E[k]=E[L]=E[R]=!0,E["[object Error]"]=E[u]=E[g]=!1;var q="object"==typeof e&&e&&e.Object===Object&&e,F="object"==typeof self&&self&&self.Object===Object&&self,D=q||F||Function("return this")(),N=n&&!n.nodeType&&n,P=N&&t&&!t.nodeType&&t,H=P&&P.exports===N;function B(e,t){return e.set(t[0],t[1]),e}function U(e,t){return e.add(t),e}function $(e,t,n,r){var o=-1,a=e?e.length:0;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}function M(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function W(e,t){return function(n){return e(t(n))}}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Q,X=Array.prototype,G=Function.prototype,J=Object.prototype,K=D["__core-js_shared__"],Y=(Q=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",Z=G.toString,ee=J.hasOwnProperty,te=J.toString,ne=RegExp("^"+Z.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=H?D.Buffer:void 0,oe=D.Symbol,ae=D.Uint8Array,ie=W(Object.getPrototypeOf,Object),ce=Object.create,ue=J.propertyIsEnumerable,se=X.splice,le=Object.getOwnPropertySymbols,fe=re?re.isBuffer:void 0,de=W(Object.keys,Object),pe=Pe(D,"DataView"),he=Pe(D,"Map"),ve=Pe(D,"Promise"),ye=Pe(D,"Set"),me=Pe(D,"WeakMap"),ge=Pe(Object,"create"),be=Me(pe),we=Me(he),je=Me(ve),_e=Me(ye),Oe=Me(me),Ae=oe?oe.prototype:void 0,xe=Ae?Ae.valueOf:void 0;function Se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Le(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Re(e){this.__data__=new ke(e)}function Ce(e,t){var n=We(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ve(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==a)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!ee.call(e,i)||o&&("length"==i||Ue(i,r))||n.push(i);return n}function Te(e,t,n){var r=e[t];ee.call(e,t)&&ze(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Ie(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}function Ee(e,t,n,r,o,p,g){var T;if(r&&(T=p?r(e,o,p,g):r(e)),void 0!==T)return T;if(!Ge(e))return e;var I=We(e);if(I){if(T=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,T)}else{var q=Be(e),F=q==u||q==s;if(Qe(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(q==d||q==a||F&&!p){if(M(e))return p?e:{};if(T=function(e){return"function"!=typeof e.constructor||$e(e)?{}:(t=ie(e),Ge(t)?ce(t):{});var t}(F?{}:e),!t)return function(e,t){return De(e,He(e),t)}(e,function(e,t){return e&&De(t,Je(t),e)}(T,e))}else{if(!E[q])return p?e:{};T=function(e,t,n,r){var o=e.constructor;switch(t){case b:return Fe(e);case i:case c:return new o(+e);case w:return function(e,t){var n=t?Fe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case j:case _:case O:case A:case x:case S:case k:case L:case R:return function(e,t){var n=t?Fe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case l:return function(e,t,n){return $(t?n(z(e),!0):z(e),B,new e.constructor)}(e,r,n);case f:case y:return new o(e);case h:return function(e){var t=new e.constructor(e.source,C.exec(e));return t.lastIndex=e.lastIndex,t}(e);case v:return function(e,t,n){return $(t?n(V(e),!0):V(e),U,new e.constructor)}(e,r,n);case m:return a=e,xe?Object(xe.call(a)):{}}var a}(e,q,Ee,t)}}g||(g=new Re);var D=g.get(e);if(D)return D;if(g.set(e,T),!I)var N=n?function(e){return function(e,t,n){var r=t(e);return We(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Je,He)}(e):Je(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(N||e,(function(o,a){N&&(o=e[a=o]),Te(T,a,Ee(o,t,n,r,a,e,g))})),T}function qe(e){return!(!Ge(e)||(t=e,Y&&Y in t))&&(Xe(e)||M(e)?ne:T).test(Me(e));var t}function Fe(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function De(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var i=t[o],c=r?r(n[i],e[i],i,n,e):void 0;Te(n,i,void 0===c?e[i]:c)}return n}function Ne(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return qe(n)?n:void 0}Se.prototype.clear=function(){this.__data__=ge?ge(null):{}},Se.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Se.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===r?void 0:n}return ee.call(t,e)?t[e]:void 0},Se.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:ee.call(t,e)},Se.prototype.set=function(e,t){return this.__data__[e]=ge&&void 0===t?r:t,this},ke.prototype.clear=function(){this.__data__=[]},ke.prototype.delete=function(e){var t=this.__data__,n=Ie(t,e);return!(n<0)&&(n==t.length-1?t.pop():se.call(t,n,1),!0)},ke.prototype.get=function(e){var t=this.__data__,n=Ie(t,e);return n<0?void 0:t[n][1]},ke.prototype.has=function(e){return Ie(this.__data__,e)>-1},ke.prototype.set=function(e,t){var n=this.__data__,r=Ie(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Le.prototype.clear=function(){this.__data__={hash:new Se,map:new(he||ke),string:new Se}},Le.prototype.delete=function(e){return Ne(this,e).delete(e)},Le.prototype.get=function(e){return Ne(this,e).get(e)},Le.prototype.has=function(e){return Ne(this,e).has(e)},Le.prototype.set=function(e,t){return Ne(this,e).set(e,t),this},Re.prototype.clear=function(){this.__data__=new ke},Re.prototype.delete=function(e){return this.__data__.delete(e)},Re.prototype.get=function(e){return this.__data__.get(e)},Re.prototype.has=function(e){return this.__data__.has(e)},Re.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ke){var r=n.__data__;if(!he||r.length<199)return r.push([e,t]),this;n=this.__data__=new Le(r)}return n.set(e,t),this};var He=le?W(le,Object):function(){return[]},Be=function(e){return te.call(e)};function Ue(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||I.test(e))&&e>-1&&e%1==0&&e<t}function $e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||J)}function Me(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(pe&&Be(new pe(new ArrayBuffer(1)))!=w||he&&Be(new he)!=l||ve&&Be(ve.resolve())!=p||ye&&Be(new ye)!=v||me&&Be(new me)!=g)&&(Be=function(e){var t=te.call(e),n=t==d?e.constructor:void 0,r=n?Me(n):void 0;if(r)switch(r){case be:return w;case we:return l;case je:return p;case _e:return v;case Oe:return g}return t});var We=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Xe(e)}var Qe=fe||function(){return!1};function Xe(e){var t=Ge(e)?te.call(e):"";return t==u||t==s}function Ge(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Je(e){return Ve(e)?Ce(e):function(e){if(!$e(e))return de(e);var t=[];for(var n in Object(e))ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}t.exports=function(e){return Ee(e,!0,!0)}})),y=9007199254740991,m="[object Arguments]",g="[object Function]",b="[object GeneratorFunction]",w=/^(?:0|[1-9]\d*)$/;function j(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var _=Object.prototype,O=_.hasOwnProperty,A=_.toString,x=_.propertyIsEnumerable,S=Math.max;function k(e,t){var n=q(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&F(e)}(e)&&O.call(e,"callee")&&(!x.call(e,"callee")||A.call(e)==m)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!O.call(e,a)||o&&("length"==a||I(a,r))||n.push(a);return n}function L(e,t,n,r){return void 0===e||E(e,_[n])&&!O.call(r,n)?t:e}function R(e,t,n){var r=e[t];O.call(e,t)&&E(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function C(e){if(!D(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,r,o=(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||_,t===r),a=[];for(var i in e)("constructor"!=i||!o&&O.call(e,i))&&a.push(i);return a}function T(e,t){return t=S(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=S(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];r=-1;for(var i=Array(t+1);++r<t;)i[r]=n[r];return i[t]=a,j(e,this,i)}}function I(e,t){return!!(t=null==t?y:t)&&("number"==typeof e||w.test(e))&&e>-1&&e%1==0&&e<t}function E(e,t){return e===t||e!=e&&t!=t}var q=Array.isArray;function F(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}(e.length)&&!function(e){var t=D(e)?A.call(e):"";return t==g||t==b}(e)}function D(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var N,P=(N=function(e,t,n,r){!function(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var i=t[o],c=r?r(n[i],e[i],i,n,e):void 0;R(n,i,void 0===c?e[i]:c)}}(t,function(e){return F(e)?k(e,!0):C(e)}(t),e,r)},T((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(o=N.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,n){if(!D(n))return!1;var r=typeof t;return!!("number"==r?F(n)&&I(t,n.length):"string"==r&&t in n)&&E(n[t],e)}(t[0],t[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var i=t[n];i&&N(e,i,n,o)}return e})));var H=T((function(e){return e.push(void 0,L),j(P,void 0,e)}));var B=function(e){var t,n;return e&&(t=e.followRoute,n=e.windowObject),n.onhashchange=r,{addToRoute:function(e){var n=H(v(e),o());a(n),t(n)},overwriteRouteEntirely:function(e){a(e),t(e)},routeFromHash:r,unpackEncodedRoute:function(e){var n=p(decodeURIComponent(e));a(n),t(n)}};function r(){t(o())}function o(){return p(n.location.hash.slice(1))}function a(e){var t=n.location.protocol+"//"+n.location.host+n.location.pathname+"#"+h(e);n.history.pushState(null,null,t)}};var U=function(e){if(e){console.error(e,e.stack);var t="";e.name&&(t+=e.name+": "),t+=e.message,e.stack&&(t+=" | "+e.stack.toString()),function(e){var t=document.getElementById("status-message");t.textContent=e,t.classList.remove("hidden")}(t)}};var $=function(){var e={};return{setListener:t,on:function(e,n,r){t({eventName:n,listener:r,element:document.querySelector(e)})}};function t({eventName:t,listener:n,element:r}){const o=`${r.id}|${t}`;var a=e[o];a&&r.removeEventListener(t,a),r.addEventListener(t,n),e[o]=n}};function M(e){return e.value||e.textContent}var z={ObjectFromDOM:function({dataAttribute:e="of",dataTypeAttribute:t="oftype",getValueFromElement:n=M}){return function(r){var o=r.querySelectorAll(`[data-${e}]`),a={};for(let e=0;e<o.length;++e)i(o[e]);return a;function i(r){let o=r.dataset[e],i=r.dataset[t]||"string",u=o.split("/"),s=a;for(let e=0;e<u.length;++e){let t=u[e];e===u.length-1?c(s,t,i,n(r)):(s[t]||(s[t]={}),s=s[t])}}function c(e,t,n,r){if("array"===n){var o=e[t];o||(o=[],e[t]=o),o.push(r)}else e[t]="int"===n?parseInt(r,10):r}}}};HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r=this;setTimeout((function(){for(var o=atob(r.toDataURL(t,n).split(",")[1]),a=o.length,i=new Uint8Array(a),c=0;c<a;c++)i[c]=o.charCodeAt(c);e(new Blob([i],{type:t||"image/png"}))}))}});function W(e,t){var n=document.createElement("li");n.setAttribute("id",t),n.setAttribute("class","entry-container"),e.append(n),n.innerHTML='<h4>Note</h4>\n<section class="note-form ccol">\n  <textarea class="note-area" data-of="caption"></textarea>\n  <span>\n    <button class="insert-link-button">Insert link</button>\n    <button class="insert-bq-button">Insert blockquote</button>\n  </span>\n  <h5>Media controls</h5>\n  <canvas class="resize-canvas hidden"></canvas>\n  <div class="image-controls hidden">\n    <canvas class="thumbnail-canvas hidden"></canvas>\n    <button class="rotate-button">Rotate image</button>\n    <h5>Resize to this maximum length for image side</h5>\n    (Set it to "unlimited" to not resize at all)\n    <input type="text" class="max-image-side-length" value="2016" />\n    <video class="video-preview hidden" controls></video>\n    <audio class="audio-preview hidden" controls></audio>\n    <button class="remove-image-button">Remove media </button>\n    <button class="scan-button">Scan text into note body</button>\n    <input class="send-image-raw-checkbox" type="checkbox" />\n    <label for="send-image-raw-checkbox"\n      >Send the image raw without resizing</label\n    >\n    <div class="scan-message progress-message hidden">Scanning…</div>\n  </div>\n\n  <button class="submit-note-button">Note!</button>\n  <div class="saving-message progress-message hidden">Saving…</div>\n</section>'}var V=t((function(e){var t={makeRequest:function(e,t){var n=e.json||"application/json"===e.mimeType,r=new XMLHttpRequest;if(r.open(e.method,e.url),e.mimeType&&r.setRequestHeader("content-type",e.mimeType),n&&r.setRequestHeader("accept","application/json"),"object"==typeof e.headers)for(var o in e.headers)r.setRequestHeader(o,e.headers[o]);e.binary&&(r.responseType="arraybuffer"),n&&"object"==typeof e.body&&(e.body=JSON.stringify(e.body));var a=null;r.onload=function(){clearTimeout(a);var o={statusCode:this.status,statusMessage:r.statusText,responseURL:r.responseURL,rawResponse:r.response,xhr:r};if(e.binary)t(null,o,r.response);else{var i=this.responseText;if(n)try{i=JSON.parse(i)}catch(e){o.jsonParseError=e}t(null,o,i)}};var i=0;function c(){r.abort(),clearTimeout(a),t()}return e.onData&&(r.onreadystatechange=function(){3===r.readyState&&(e.onData(this.responseText.substr(i)),i=this.responseText.length)}),r.onerror=function(){var e=new Error("There is a problem with the network.");e.name="XHR network error",t(e)},r.send(e.formData||e.body),e.timeLimit>0&&(a=setTimeout(c,e.timeLimit)),{url:e.url,cancelRequest:c}}};e.exports=t.makeRequest}));var Q=function({ok:e,nok:t,log:n=console.log}){return function(r){if(r)n&&(r.stack?n(r,r.stack):n(r)),t&&t(r);else if(e){var o=Array.prototype.slice.call(arguments,1);t&&o.push(t),e.apply(e,o)}}};function X({sel:e,message:t}){var n=document.querySelector(e);n.textContent=t,n.classList.remove("hidden")}var G=t((function(t){var n,r,o,a;n=e,r=function(e){"function"==typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)},o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,t){if(t=t||function(){},!o(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var a=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),i=e.next();i?o.push(a(i)):o.push(t),r((function(){e.apply(null,o)}))}}};a(function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)}(e))()},t.exports?t.exports=a:n.asyncWaterfall=a}));var J=/\n/g;function K({rootSel:e}){var t=document.querySelector(e+" .saving-message");return function({note:n,archive:r,password:o,file:a,canvasImageOps:i,sendImageRaw:c}){t.textContent="Saving…",t.classList.remove("hidden"),n.caption=n.caption.replace(J,"<br>");var u={method:"POST",url:"https://smidgeo.com/note-taker/note",json:!0,headers:{Authorization:"Key "+o,"X-Note-Archive":r}};a?function(t){let r=new FormData;for(let e in n)r.append(e,n[e]);if(r.append("mediaFilename",a.name),r.append("altText",n.caption.slice(0,100)),a.type.startsWith("video/"))r.append("isVideo",!0),o(a,Q({ok:s,nok:U}));else if(a.type.startsWith("audio/")||[".mp3",".wav",".ogg","m4a"].some(e=>a.name.toLowerCase().endsWith(e)))r.append("isAudio",!0),o(a,Q({ok:s,nok:U}));else if(c)o(a,Q({ok:s,nok:U}));else{if(!i.canvasHasImage()){const t="Unknown file: No image is loaded to canvas, nor is the file a video.";throw X({message:"Could not save note. "+t,sel:e+" .saving-message"}),new Error(t)}G([i.getImageFromCanvas,o,s],U)}function o(e,n){r.append("buffer",e),t.formData=r,V(t,n)}}(u):(u.headers["Content-Type"]="application/json",u.body=n,V(u,Q({ok:s,nok:U})));function s(t,r){var o,a;t.statusCode<300&&t.statusCode>199?(X({message:`Saved note: "${n.caption}".`,sel:e+" .saving-message"}),o=document.getElementById("media-file"),a=document.querySelector("textarea"),o.value=null,a.value=null):X({message:`Could not save note. ${t.statusCode}: ${r.message}`,sel:e+" .saving-message"})}}}var Y=/(\w)\n(\w)/g;function Z({rootSel:e,file:t}){var n=document.querySelector(e+" .note-area"),r=document.querySelector(e+" .scan-message");r.textContent="Scanning…",r.classList.remove("hidden"),Tesseract.recognize(t,"eng").then((function(e){if(r.classList.add("hidden"),e.text){const t=e.text.trim().replace(Y,"$1 $2");n.value=n.value+`\n<blockquote>${t}</blockquote>\n`}}),(function(e){r.textContent=e.message,r.classList.remove("hidden")}))}var{on:ee}=$(),te=z.ObjectFromDOM({}),ne=document.getElementById("entries");function re({rootSel:e,file:t}){var n=K({rootSel:e}),r=function({rootSel:e}){var t,n,r=document.querySelector(e+" .resize-canvas"),o=document.querySelector(e+" .thumbnail-canvas"),a=r.getContext("2d"),i=o.getContext("2d"),c=0,u=!1;return{loadFileToCanvas:function({mimeType:e,maxSideLength:o,file:a}){(t=new Image).addEventListener("load",(function(){c=0;var a,i,s=t.width,f=t.height;s>f?i=f*(a=o)/s:a=s*(i=o)/f,r.width=a,r.height=i,l(t,a,i),n=e,u=!0})),t.src=URL.createObjectURL(a)},getImageFromCanvas:function(e){r.toBlob((function(t){e(null,t)}),n,.7)},canvasHasImage:s,rotateImage:function(){if(s()){c+=1,a.clearRect(0,0,r.width,r.height);var e=r.width,n=r.height;r.width=n,r.height=e,console.log(r.width,r.height);var o=c*Math.PI/2;a.translate(r.width/2,r.height/2),a.rotate(o),c%2==1?(a.translate(-e/2,-n/2),l(t,r.height,r.width)):(a.translate(-r.width/2,-r.height/2),l(t,r.width,r.height))}},clearCanvases:function(){a.clearRect(0,0,r.width,r.height),i.clearRect(0,0,o.width,o.height)}};function s(){return u}function l(e,t,n){a.drawImage(e,0,0,t,n),o.width=300,o.height=200,i.drawImage(r,0,0,r.width,r.height,0,0,300,200)}}({rootSel:e}),o=document.querySelector(e+" .note-area"),a=document.querySelector(e+" .max-image-side-length"),i=document.querySelector(e+" .image-controls"),c=document.querySelector(e+" .video-preview"),u=document.querySelector(e+" .audio-preview"),s=document.querySelector(e+" .thumbnail-canvas");ee(e+" .submit-note-button","click",(function(){var o=te(document.querySelector(e+" .note-form")),a=document.getElementById("archive").value,i=document.getElementById("password").value;n({note:o,archive:a,password:i,file:t,canvasImageOps:r,sendImageRaw:document.querySelector(e+" .send-image-raw-checkbox").checked})})),ee(e+" .insert-link-button","click",f('<a href="URL"></a>')),ee(e+" .insert-bq-button","click",f("<blockquote></blockquote>")),ee(e+" .rotate-button","click",r.rotateImage),ee(e+" .scan-button","click",(function(){Z&&Z({rootSel:e,file:t})})),ee(e+" .remove-image-button","click",(function(){r.clearCanvases(),i.classList.add("hidden")}));var l=+a.value;function f(e){return function(){o.value=o.value+e}}t&&(i.classList.remove("hidden"),t.type.startsWith("image/")&&!isNaN(l)?(r.loadFileToCanvas({file:t,mimeType:t.type,maxSideLength:l}),s.classList.remove("hidden")):t.type.startsWith("video/")?(c.setAttribute("src",URL.createObjectURL(t)),c.classList.remove("hidden")):t.type.startsWith("audio/")&&(u.setAttribute("src",URL.createObjectURL(t)),u.classList.remove("hidden")))}var oe="2.1.1",ae=B({followRoute:function(){W(document.getElementById("entries"),"base-entry"),function(){function e(){var e=this.files;if(!(e.length<1)){n();for(var r=0;r<e.length;++r)t(e[r],r)}}function t(e,t){var n="media-entry-"+t;W(ne,n),re({rootSel:"#"+n,file:e})}function n(){return ne.innerHTML="",!0}ee("#clear-entries-button","click",()=>n()&&W(ne,"base-entry")),ee("#media-file","change",e),re({rootSel:"#base-entry"}),e.bind(document.getElementById("media-file"))()}()},windowObject:window});function ie(e,t,n,r,o){U(o)}!async function(){document.getElementById("version-info").textContent=oe,window.onerror=ie,ae.routeFromHash()}()}();
//# sourceMappingURL=index.js.map
