!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var n=t((function(e,t){var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var a=e;return Array.isArray(e)&&!Array.isArray(r)&&(a=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach((function(r,a){n.call(e,a)?e[a]&&"object"==typeof e[a]?e[a]=t.merge(e[a],r,o):e.push(r):e[a]=r})),e):Object.keys(r).reduce((function(e,a){var i=r[a];return n.call(e,a)?e[a]=t.merge(e[a],i,o):e[a]=i,e}),a)},t.assign=function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var a=t.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?n+=t.charAt(o):a<128?n+=r[a]:a<2048?n+=r[192|a>>6]+r[128|63&a]:a<55296||a>=57344?n+=r[224|a>>12]+r[128|a>>6&63]+r[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(o)),n+=r[240|a>>18]+r[128|a>>12&63]+r[128|a>>6&63]+r[128|63&a])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],i=Object.keys(a),c=0;c<i.length;++c){var u=i[c],s=a[u];"object"==typeof s&&null!==s&&-1===n.indexOf(s)&&(t.push({obj:a,prop:u}),n.push(s))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}})),r=String.prototype.replace,o=/%20/g,a={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return c.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,o,a,i,c,s,l,f,d,p,h){var y=t;if("function"==typeof s)y=s(r,y);else if(y instanceof Date)y=d(y);else if(null===y){if(a)return c&&!h?c(r,u.encoder):r;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||n.isBuffer(y))return c?[p(h?r:c(r,u.encoder))+"="+p(c(y,u.encoder))]:[p(r)+"="+p(String(y))];var v,m=[];if(void 0===y)return m;if(Array.isArray(s))v=s;else{var b=Object.keys(y);v=l?b.sort(l):b}for(var g=0;g<v.length;++g){var j=v[g];i&&null===y[j]||(m=Array.isArray(y)?m.concat(e(y[j],o(r,j),o,a,i,c,s,l,f,d,p,h)):m.concat(e(y[j],r+(f?"."+j:"["+j+"]"),o,a,i,c,s,l,f,d,p,h)))}return m},l=Object.prototype.hasOwnProperty,f={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},d=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),i=a?r.slice(0,a.index):r,c=[];if(i){if(!n.plainObjects&&l.call(Object.prototype,i)&&!n.allowPrototypes)return;c.push(i)}for(var u=0;null!==(a=o.exec(r))&&u<n.depth;){if(u+=1,!n.plainObjects&&l.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var a,i=e[o];if("[]"===i)a=(a=[]).concat(r);else{a=n.plainObjects?Object.create(null):{};var c="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,u=parseInt(c,10);!isNaN(u)&&i!==c&&String(u)===c&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(a=[])[u]=r:a[c]=r}r=a}return r}(c,t,n)}},p=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:f.delimiter,r.depth="number"==typeof r.depth?r.depth:f.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:f.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:f.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:f.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:f.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:f.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:f.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:f.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,o),i=0;i<a.length;++i){var c,u,s=a[i],d=s.indexOf("]="),p=-1===d?s.indexOf("="):d+1;-1===p?(c=t.decoder(s,f.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(s.slice(0,p),f.decoder),u=t.decoder(s.slice(p+1),f.decoder)),l.call(n,c)?n[c]=[].concat(n[c]).concat(u):n[c]=u}return n}(e,r):e,a=r.plainObjects?Object.create(null):{},i=Object.keys(o),c=0;c<i.length;++c){var u=i[c],s=d(u,o[u],r);a=n.merge(a,s,r)}return n.compact(a)},h=function(e,t){var r=e,o=t?n.assign({},t):{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===o.delimiter?u.delimiter:o.delimiter,l="boolean"==typeof o.strictNullHandling?o.strictNullHandling:u.strictNullHandling,f="boolean"==typeof o.skipNulls?o.skipNulls:u.skipNulls,d="boolean"==typeof o.encode?o.encode:u.encode,p="function"==typeof o.encoder?o.encoder:u.encoder,h="function"==typeof o.sort?o.sort:null,y=void 0!==o.allowDots&&o.allowDots,v="function"==typeof o.serializeDate?o.serializeDate:u.serializeDate,m="boolean"==typeof o.encodeValuesOnly?o.encodeValuesOnly:u.encodeValuesOnly;if(void 0===o.format)o.format=a.default;else if(!Object.prototype.hasOwnProperty.call(a.formatters,o.format))throw new TypeError("Unknown format option provided.");var b,g,j=a.formatters[o.format];"function"==typeof o.filter?r=(g=o.filter)("",r):Array.isArray(o.filter)&&(b=g=o.filter);var w,_=[];if("object"!=typeof r||null===r)return"";w=o.arrayFormat in i?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var O=i[w];b||(b=Object.keys(r)),h&&b.sort(h);for(var A=0;A<b.length;++A){var S=b[A];f&&null===r[S]||(_=_.concat(s(r[S],S,O,l,f,d?p:null,g,h,y,v,j,m)))}var x=_.join(c),L=!0===o.addQueryPrefix?"?":"";return x.length>0?L+x:""},y=t((function(t,n){var r="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",i="[object Boolean]",c="[object Date]",u="[object Function]",s="[object GeneratorFunction]",l="[object Map]",f="[object Number]",d="[object Object]",p="[object Promise]",h="[object RegExp]",y="[object Set]",v="[object String]",m="[object Symbol]",b="[object WeakMap]",g="[object ArrayBuffer]",j="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",O="[object Int8Array]",A="[object Int16Array]",S="[object Int32Array]",x="[object Uint8Array]",L="[object Uint8ClampedArray]",k="[object Uint16Array]",R="[object Uint32Array]",C=/\w*$/,E=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,q={};q[a]=q["[object Array]"]=q[g]=q[j]=q[i]=q[c]=q[w]=q[_]=q[O]=q[A]=q[S]=q[l]=q[f]=q[d]=q[h]=q[y]=q[v]=q[m]=q[x]=q[L]=q[k]=q[R]=!0,q["[object Error]"]=q[u]=q[b]=!1;var I="object"==typeof e&&e&&e.Object===Object&&e,F="object"==typeof self&&self&&self.Object===Object&&self,P=I||F||Function("return this")(),D=n&&!n.nodeType&&n,N=D&&t&&!t.nodeType&&t,H=N&&N.exports===D;function B(e,t){return e.set(t[0],t[1]),e}function U(e,t){return e.add(t),e}function $(e,t,n,r){var o=-1,a=e?e.length:0;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}function M(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function V(e,t){return function(n){return e(t(n))}}function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Q,J=Array.prototype,X=Function.prototype,G=Object.prototype,K=P["__core-js_shared__"],Y=(Q=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",Z=X.toString,ee=G.hasOwnProperty,te=G.toString,ne=RegExp("^"+Z.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=H?P.Buffer:void 0,oe=P.Symbol,ae=P.Uint8Array,ie=V(Object.getPrototypeOf,Object),ce=Object.create,ue=G.propertyIsEnumerable,se=J.splice,le=Object.getOwnPropertySymbols,fe=re?re.isBuffer:void 0,de=V(Object.keys,Object),pe=Ne(P,"DataView"),he=Ne(P,"Map"),ye=Ne(P,"Promise"),ve=Ne(P,"Set"),me=Ne(P,"WeakMap"),be=Ne(Object,"create"),ge=Me(pe),je=Me(he),we=Me(ye),_e=Me(ve),Oe=Me(me),Ae=oe?oe.prototype:void 0,Se=Ae?Ae.valueOf:void 0;function xe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Le(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Re(e){this.__data__=new Le(e)}function Ce(e,t){var n=Ve(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&We(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==a)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!ee.call(e,i)||o&&("length"==i||Ue(i,r))||n.push(i);return n}function Ee(e,t,n){var r=e[t];ee.call(e,t)&&ze(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Te(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}function qe(e,t,n,r,o,p,b){var E;if(r&&(E=p?r(e,o,p,b):r(e)),void 0!==E)return E;if(!Xe(e))return e;var T=Ve(e);if(T){if(E=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,E)}else{var I=Be(e),F=I==u||I==s;if(Qe(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(I==d||I==a||F&&!p){if(M(e))return p?e:{};if(E=function(e){return"function"!=typeof e.constructor||$e(e)?{}:(t=ie(e),Xe(t)?ce(t):{});var t}(F?{}:e),!t)return function(e,t){return Pe(e,He(e),t)}(e,function(e,t){return e&&Pe(t,Ge(t),e)}(E,e))}else{if(!q[I])return p?e:{};E=function(e,t,n,r){var o=e.constructor;switch(t){case g:return Fe(e);case i:case c:return new o(+e);case j:return function(e,t){var n=t?Fe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case w:case _:case O:case A:case S:case x:case L:case k:case R:return function(e,t){var n=t?Fe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case l:return function(e,t,n){return $(t?n(z(e),!0):z(e),B,new e.constructor)}(e,r,n);case f:case v:return new o(e);case h:return function(e){var t=new e.constructor(e.source,C.exec(e));return t.lastIndex=e.lastIndex,t}(e);case y:return function(e,t,n){return $(t?n(W(e),!0):W(e),U,new e.constructor)}(e,r,n);case m:return a=e,Se?Object(Se.call(a)):{}}var a}(e,I,qe,t)}}b||(b=new Re);var P=b.get(e);if(P)return P;if(b.set(e,E),!T)var D=n?function(e){return function(e,t,n){var r=t(e);return Ve(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Ge,He)}(e):Ge(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(D||e,(function(o,a){D&&(o=e[a=o]),Ee(E,a,qe(o,t,n,r,a,e,b))})),E}function Ie(e){return!(!Xe(e)||(t=e,Y&&Y in t))&&(Je(e)||M(e)?ne:E).test(Me(e));var t}function Fe(e){var t=new e.constructor(e.byteLength);return new ae(t).set(new ae(e)),t}function Pe(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var i=t[o],c=r?r(n[i],e[i],i,n,e):void 0;Ee(n,i,void 0===c?e[i]:c)}return n}function De(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Ne(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ie(n)?n:void 0}xe.prototype.clear=function(){this.__data__=be?be(null):{}},xe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},xe.prototype.get=function(e){var t=this.__data__;if(be){var n=t[e];return n===r?void 0:n}return ee.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:ee.call(t,e)},xe.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?r:t,this},Le.prototype.clear=function(){this.__data__=[]},Le.prototype.delete=function(e){var t=this.__data__,n=Te(t,e);return!(n<0)&&(n==t.length-1?t.pop():se.call(t,n,1),!0)},Le.prototype.get=function(e){var t=this.__data__,n=Te(t,e);return n<0?void 0:t[n][1]},Le.prototype.has=function(e){return Te(this.__data__,e)>-1},Le.prototype.set=function(e,t){var n=this.__data__,r=Te(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ke.prototype.clear=function(){this.__data__={hash:new xe,map:new(he||Le),string:new xe}},ke.prototype.delete=function(e){return De(this,e).delete(e)},ke.prototype.get=function(e){return De(this,e).get(e)},ke.prototype.has=function(e){return De(this,e).has(e)},ke.prototype.set=function(e,t){return De(this,e).set(e,t),this},Re.prototype.clear=function(){this.__data__=new Le},Re.prototype.delete=function(e){return this.__data__.delete(e)},Re.prototype.get=function(e){return this.__data__.get(e)},Re.prototype.has=function(e){return this.__data__.has(e)},Re.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Le){var r=n.__data__;if(!he||r.length<199)return r.push([e,t]),this;n=this.__data__=new ke(r)}return n.set(e,t),this};var He=le?V(le,Object):function(){return[]},Be=function(e){return te.call(e)};function Ue(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function $e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||G)}function Me(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(pe&&Be(new pe(new ArrayBuffer(1)))!=j||he&&Be(new he)!=l||ye&&Be(ye.resolve())!=p||ve&&Be(new ve)!=y||me&&Be(new me)!=b)&&(Be=function(e){var t=te.call(e),n=t==d?e.constructor:void 0,r=n?Me(n):void 0;if(r)switch(r){case ge:return j;case je:return l;case we:return p;case _e:return y;case Oe:return b}return t});var Ve=Array.isArray;function We(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Je(e)}var Qe=fe||function(){return!1};function Je(e){var t=Xe(e)?te.call(e):"";return t==u||t==s}function Xe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ge(e){return We(e)?Ce(e):function(e){if(!$e(e))return de(e);var t=[];for(var n in Object(e))ee.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}t.exports=function(e){return qe(e,!0,!0)}})),v=9007199254740991,m="[object Arguments]",b="[object Function]",g="[object GeneratorFunction]",j=/^(?:0|[1-9]\d*)$/;function w(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var _=Object.prototype,O=_.hasOwnProperty,A=_.toString,S=_.propertyIsEnumerable,x=Math.max;function L(e,t){var n=I(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&F(e)}(e)&&O.call(e,"callee")&&(!S.call(e,"callee")||A.call(e)==m)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!O.call(e,a)||o&&("length"==a||T(a,r))||n.push(a);return n}function k(e,t,n,r){return void 0===e||q(e,_[n])&&!O.call(r,n)?t:e}function R(e,t,n){var r=e[t];O.call(e,t)&&q(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function C(e){if(!P(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,r,o=(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||_,t===r),a=[];for(var i in e)("constructor"!=i||!o&&O.call(e,i))&&a.push(i);return a}function E(e,t){return t=x(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,o=x(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];r=-1;for(var i=Array(t+1);++r<t;)i[r]=n[r];return i[t]=a,w(e,this,i)}}function T(e,t){return!!(t=null==t?v:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}function q(e,t){return e===t||e!=e&&t!=t}var I=Array.isArray;function F(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}(e.length)&&!function(e){var t=P(e)?A.call(e):"";return t==b||t==g}(e)}function P(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var D,N=(D=function(e,t,n,r){!function(e,t,n,r){n||(n={});for(var o=-1,a=t.length;++o<a;){var i=t[o],c=r?r(n[i],e[i],i,n,e):void 0;R(n,i,void 0===c?e[i]:c)}}(t,function(e){return F(e)?L(e,!0):C(e)}(t),e,r)},E((function(e,t){var n=-1,r=t.length,o=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(o=D.length>3&&"function"==typeof o?(r--,o):void 0,a&&function(e,t,n){if(!P(n))return!1;var r=typeof t;return!!("number"==r?F(n)&&T(t,n.length):"string"==r&&t in n)&&q(n[t],e)}(t[0],t[1],a)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var i=t[n];i&&D(e,i,n,o)}return e})));var H=E((function(e){return e.push(void 0,k),w(N,void 0,e)}));var B=function(e){var t,n;return e&&(t=e.followRoute,n=e.windowObject),n.onhashchange=r,{addToRoute:function(e){var n=H(y(e),o());a(n),t(n)},overwriteRouteEntirely:function(e){a(e),t(e)},routeFromHash:r,unpackEncodedRoute:function(e){var n=p(decodeURIComponent(e));a(n),t(n)}};function r(){t(o())}function o(){return p(n.location.hash.slice(1))}function a(e){var t=n.location.protocol+"//"+n.location.host+n.location.pathname+"#"+h(e);n.history.pushState(null,null,t)}};var U=function(e){if(e){console.error(e,e.stack);var t="";e.name&&(t+=e.name+": "),t+=e.message,e.stack&&(t+=" | "+e.stack.toString()),function(e){var t=document.getElementById("status-message");t.textContent=e,t.classList.remove("hidden")}(t)}},$=t((function(e){var t={makeRequest:function(e,t){var n=e.json||"application/json"===e.mimeType,r=new XMLHttpRequest;if(r.open(e.method,e.url),e.mimeType&&r.setRequestHeader("content-type",e.mimeType),n&&r.setRequestHeader("accept","application/json"),"object"==typeof e.headers)for(var o in e.headers)r.setRequestHeader(o,e.headers[o]);e.binary&&(r.responseType="arraybuffer"),n&&"object"==typeof e.body&&(e.body=JSON.stringify(e.body));var a=null;r.onload=function(){clearTimeout(a);var o={statusCode:this.status,statusMessage:r.statusText,responseURL:r.responseURL,rawResponse:r.response,xhr:r};if(e.binary)t(null,o,r.response);else{var i=this.responseText;if(n)try{i=JSON.parse(i)}catch(e){o.jsonParseError=e}t(null,o,i)}};var i=0;function c(){r.abort(),clearTimeout(a),t()}return e.onData&&(r.onreadystatechange=function(){3===r.readyState&&(e.onData(this.responseText.substr(i)),i=this.responseText.length)}),r.onerror=function(){var e=new Error("There is a problem with the network.");e.name="XHR network error",t(e)},r.send(e.formData||e.body),e.timeLimit>0&&(a=setTimeout(c,e.timeLimit)),{url:e.url,cancelRequest:c}}};e.exports=t.makeRequest}));var M=function({ok:e,nok:t,log:n=console.log}){return function(r){if(r)n&&(r.stack?n(r,r.stack):n(r)),t&&t(r);else if(e){var o=Array.prototype.slice.call(arguments,1);t&&o.push(t),e.apply(e,o)}}};function z({sel:e,message:t}){var n=document.querySelector(e);n.textContent=t,n.classList.remove("hidden")}var V=/\n/g;function W({note:e,archive:t,password:n,mediaObjects:r,rootSel:o}){var a=document.querySelector(o+" .saving-message");a.textContent="Saving…",a.classList.remove("hidden"),e.caption=e.caption.replace(V,"<br>");var i={method:"POST",url:"https://smidgeo.com/note-taker/note",json:!0,headers:{Authorization:"Key "+n,"X-Note-Archive":t}};r&&r.length>0?i.formData=function({mediaObjects:e,note:t}){let n=new FormData;for(let e in t)n.append(e,t[e]);e&&(e.forEach((e,t)=>n.append("buffer"+t,e.file)),n.append("mediaFiles",JSON.stringify(e.map(Q))));return n}({mediaObjects:r,note:e}):(i.headers["Content-Type"]="application/json",i.body=e),$(i,M({ok:function(t,n){t.statusCode<300&&t.statusCode>199?(z({message:`Saved note: "${e.caption}".`,sel:o+" .saving-message"}),r=document.getElementById("media-file"),a=document.querySelector("textarea"),r.value=null,a.value=null):z({message:`Could not save note. ${t.statusCode}: ${n.message}`,sel:o+" .saving-message"});var r,a},nok:U}))}function Q(e){const t=e.file.type;return{filename:e.filename,alt:e.alt,mimeType:t,isVideo:t.startsWith("video/"),isAudio:t.startsWith("audio/")}}var J=function(){var e={};return{setListener:t,on:function(e,n,r){t({eventName:n,listener:r,element:document.querySelector(e)})}};function t({eventName:t,listener:n,element:r}){const o=`${r.id}|${t}`;var a=e[o];a&&r.removeEventListener(t,a),r.addEventListener(t,n),e[o]=n}};function X(e){return e.value||e.textContent}var G={ObjectFromDOM:function({dataAttribute:e="of",dataTypeAttribute:t="oftype",getValueFromElement:n=X}){return function(r){var o=r.querySelectorAll(`[data-${e}]`),a={};for(let e=0;e<o.length;++e)i(o[e]);return a;function i(r){let o=r.dataset[e],i=r.dataset[t]||"string",u=o.split("/"),s=a;for(let e=0;e<u.length;++e){let t=u[e];e===u.length-1?c(s,t,i,n(r)):(s[t]||(s[t]={}),s=s[t])}}function c(e,t,n,r){if("array"===n){var o=e[t];o||(o=[],e[t]=o),o.push(r)}else e[t]="int"===n?parseInt(r,10):r}}}};HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r=this;setTimeout((function(){for(var o=atob(r.toDataURL(t,n).split(",")[1]),a=o.length,i=new Uint8Array(a),c=0;c<a;c++)i[c]=o.charCodeAt(c);e(new Blob([i],{type:t||"image/png"}))}))}});var K=/(\w)\n(\w)/g;function Y({rootSel:e,file:t}){var n=document.querySelector(e+" .note-area"),r=document.querySelector(e+" .scan-message");r.textContent="Scanning…",r.classList.remove("hidden"),Tesseract.recognize(t,"eng").then((function(e){if(r.classList.add("hidden"),e.text){const t=e.text.trim().replace(K,"$1 $2");n.value=n.value+`\n<blockquote>${t}</blockquote>\n`}}),(function(e){r.textContent=e.message,r.classList.remove("hidden")}))}const Z='\n  <h5>Media file</h5>\n\n  <canvas class="resize-canvas hidden"></canvas>\n  <div class="image-controls hidden">\n    <canvas class="thumbnail-canvas hidden"></canvas>\n    <button class="rotate-button">Rotate image</button>\n    <h5>Resize to this maximum length for image side</h5>\n    (Set it to "unlimited" to not resize at all)\n    <input type="text" class="max-image-side-length" value="2016" />\n    <button class="remove-image-button">Remove media </button>\n    <button class="scan-button">Scan text into note body</button>\n    <h3>Alt text</h3>\n    <input class="alt-text" type="text" />\n    <input class="send-image-raw-checkbox" type="checkbox" />\n    <label for="send-image-raw-checkbox"\n      >Send the image raw without resizing</label\n    >\n  </div>\n  <video class="video-preview hidden" controls></video>\n  <audio class="audio-preview hidden" controls></audio>\n';var{on:ee}=J();function te({parentSel:e,file:t,idLabel:n}){var{mediaRoot:r,mediaContainerClass:o}=function(e,t){var n=document.querySelector(e),r=document.createElement("div");const o="entry-media-"+t;return r.classList.add("entry-media-controls"),r.classList.add(o),n.append(r),r.innerHTML=Z,{mediaRoot:r,mediaContainerClass:o}}(e,n);const a=e+" ."+o;var i=function({rootSel:e}){var t,n,r=document.querySelector(e+" .resize-canvas"),o=document.querySelector(e+" .thumbnail-canvas"),a=r.getContext("2d"),i=o.getContext("2d"),c=0,u=!1;return{loadFileToCanvas:function({mimeType:e,maxSideLength:o,file:a}){(t=new Image).addEventListener("load",(function(){c=0;var a,i,s=t.width,f=t.height;s>f?i=f*(a=o)/s:a=s*(i=o)/f,r.width=a,r.height=i,l(t,a,i),n=e,u=!0})),t.src=URL.createObjectURL(a)},getImageFromCanvas:function(){return new Promise(e=>r.toBlob(e,n,.7))},canvasHasImage:s,rotateImage:function(){if(s()){c+=1,a.clearRect(0,0,r.width,r.height);var e=r.width,n=r.height;r.width=n,r.height=e,console.log(r.width,r.height);var o=c*Math.PI/2;a.translate(r.width/2,r.height/2),a.rotate(o),c%2==1?(a.translate(-e/2,-n/2),l(t,r.height,r.width)):(a.translate(-r.width/2,-r.height/2),l(t,r.width,r.height))}},clearCanvases:function(){a.clearRect(0,0,r.width,r.height),i.clearRect(0,0,o.width,o.height)}};function s(){return u}function l(e,t,n){a.drawImage(e,0,0,t,n),o.width=300,o.height=200,i.drawImage(r,0,0,r.width,r.height,0,0,300,200)}}({rootSel:a}),c=r.querySelector(".max-image-side-length"),u=r.querySelector(".image-controls"),s=r.querySelector(".video-preview"),l=r.querySelector(".audio-preview"),f=r.querySelector(".thumbnail-canvas"),d=+c.value;return t&&(t.type.startsWith("image/")&&!isNaN(d)?(u.classList.remove("hidden"),i.loadFileToCanvas({file:t,mimeType:t.type,maxSideLength:d}),f.classList.remove("hidden"),ee(a+" .scan-button","click",Y),ee(a+" .rotate-button","click",i.rotateImage),ee(a+" .remove-image-button","click",(function(){i.clearCanvases(),u.classList.add("hidden"),t=null}))):t.type.startsWith("video/")?(s.setAttribute("src",URL.createObjectURL(t)),s.setAttribute("type",t.type),s.classList.remove("hidden")):t.type.startsWith("audio/")&&(l.setAttribute("src",URL.createObjectURL(t)),l.classList.remove("hidden"))),async function(){if(!t)return;let e=t;t.type.startsWith("image/")&&(e=document.querySelector(a+" .send-image-raw-checkbox").checked?t:await i.getImageFromCanvas());var n=document.querySelector(a+" .alt-text");return{file:e,filename:t.name,alt:n.value}}}var ne=G.ObjectFromDOM({}),{on:re}=J();function oe({parentEl:e,id:t,files:n}){var r=[];const o="#"+t;var a=document.createElement("li");a.setAttribute("id",t),a.setAttribute("class","entry-container"),e.append(a),a.innerHTML='<h4>Note</h4>\n<section class="note-form ccol">\n  <textarea class="note-area" data-of="caption"></textarea>\n  <span>\n    <button class="insert-link-button">Insert link</button>\n    <button class="insert-bq-button">Insert blockquote</button>\n  </span>\n  <h5>Media for this entry</h5>\n  <input type="file" class="entry-media-file" accept="image/*, video/*, audio/*, .m4a,.ogg,.mp3,.wav" multiple />\n\n  <ul class="entry-media-list">\n  </ul>\n    <div class="scan-message progress-message hidden">Scanning…</div>\n  </div>\n\n  <button class="submit-note-button">Note!</button>\n  <div class="saving-message progress-message hidden">Saving…</div>\n</section>';var i=document.querySelector(o+" .note-area");function c(e){return function(){i.value=i.value+e}}n&&(r=n.map((e,t)=>te({parentSel:o+" .entry-media-list",file:e,idLabel:t}))),re(o+" .submit-note-button","click",(async function(){var e=ne(document.querySelector(o+" .note-form")),t=document.getElementById("archive").value,n=document.getElementById("password").value,a=[];if(r)for(let e of r){let t=await e();t&&a.push(t)}W({note:e,archive:t,password:n,mediaObjects:a,rootSel:o})})),re(o+" .insert-link-button","click",c('<a href="URL"></a>')),re(o+" .insert-bq-button","click",c("<blockquote></blockquote>")),re(o+" .entry-media-file","change",(function(){n=this.files,r=[];for(let e=0;e<n.length;++e)r.push(te({parentSel:o,file:n[e],idLabel:e}))}))}var{on:ae}=J(),ie=document.getElementById("entries");var ce="2.1.1",ue=document.getElementById("entries"),se=B({followRoute:function(){oe({parentEl:ue,id:"base-entry",files:[]}),function(){function e(){var e=this.files;if(!(e.length<1)){n();for(var r=0;r<e.length;++r)t(e[r],r)}}function t(e,t){oe({parentEl:ie,id:"media-entry-"+t,files:[e]})}function n(){return ie.innerHTML="",!0}ae("#clear-entries-button","click",()=>n()&&oe({parentEl:ie,id:"base-entry",files:[]})),ae("#media-file","change",e),e.bind(document.getElementById("media-file"))()}()},windowObject:window});function le(e,t,n,r,o){U(o)}!async function(){document.getElementById("version-info").textContent=ce,window.onerror=le,se.routeFromHash()}()}();
//# sourceMappingURL=index.js.map
